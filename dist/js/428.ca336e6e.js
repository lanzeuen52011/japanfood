"use strict";(self["webpackChunk_321"]=self["webpackChunk_321"]||[]).push([[428],{8428:function(t,e,a){a.r(e),a.d(e,{default:function(){return L}});var o=a(3396);function c(t,e,a,c,s,_){const l=(0,o.up)("Cart",!0);return(0,o.wg)(),(0,o.j4)(l)}var s=a(7139),_=a(9242);const l=t=>((0,o.dD)("data-v-2704a99b"),t=t(),(0,o.Cn)(),t),r={class:"container cart__container"},n={class:"cart__list"},i=l((()=>(0,o._)("tr",{class:"cart__list__item"},[(0,o._)("th",{class:"cart__text cart__head"},"品項"),(0,o._)("th",{class:"cart__text cart__head"},"數量"),(0,o._)("th",{class:"cart__text cart__head cart__price"},"單價"),(0,o._)("th",{class:"cart__text cart__head cart__price"},"總價"),(0,o._)("th",{class:"cart__head cart__price cart__del"})],-1))),u={class:"cart__text"},d=["src","alt"],p={class:"cart__text bookNumber__control"},k=["onClick"],b=["onUpdate:modelValue"],h=["onClick"],m={class:"cart__text"},g={class:"cart__price"},v={class:"cart__text"},w={class:"cart__price"},f=["onClick"],y={class:"cart__list__item"},S=l((()=>(0,o._)("td",{class:"input-group"},[(0,o._)("input",{type:"text",id:"login_email",required:"",class:"input-group__input"}),(0,o._)("label",{for:"login_email",class:"input-group__label"},"輸入折價券代號")],-1))),x=[S],C={key:0,class:"cart__list__item"},q=l((()=>(0,o._)("td",null,"購物車目前還是空的唷！",-1))),D=[q],B={class:"check__table"},N=l((()=>(0,o._)("tr",{class:"cart__check spaceBetween"},[(0,o._)("td",{class:"cart__text"},[(0,o._)("p",{class:"cart__price sum__price cart__head"},"折扣：")]),(0,o._)("td",{class:"cart__text"},[(0,o._)("p",{class:"cart__price sum__price"},"0")])],-1))),H={class:"cart__check spaceBetween"},I=l((()=>(0,o._)("td",{class:"cart__text"},[(0,o._)("p",{class:"cart__price sum__price cart__head"},"總共：")],-1))),J={class:"cart__text"},O={class:"cart__price sum__price doubleUnderline"},R={class:"cart__check"};function W(t,e,a,c,l,S){const q=(0,o.up)("NotificationModal"),W=(0,o.Q2)("price");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("section",r,[(0,o._)("table",n,[i,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.bookinfo,((t,a)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{key:t.goods,class:"cart__list__item"},[(0,o._)("td",u,[(0,o._)("img",{class:"img",src:t.img,alt:t.nameeng},null,8,d),(0,o._)("article",null,[(0,o._)("h3",null,(0,s.zw)(t.name),1),(0,o._)("p",null,(0,s.zw)(t.desc),1)])]),(0,o._)("td",p,[(0,o._)("button",{class:"bookNumber__button border border__first",onClick:e=>c.Incre(t)}," + ",8,k),(0,o.wy)((0,o._)("input",{class:"border",type:"text","onUpdate:modelValue":e=>t.quantity=e,onKeyup:e[0]||(e[0]=(0,_.D2)(((...t)=>c.confirmBook&&c.confirmBook(...t)),["enter"]))},null,40,b),[[_.nr,t.quantity]]),(0,o._)("button",{class:(0,s.C_)(["bookNumber__button","border"]),onClick:e=>c.Decre(t)}," - ",8,h)]),(0,o._)("td",m,[(0,o.wy)((0,o._)("p",g,null,512),[[W,t.price/t.quantity]])]),(0,o._)("td",v,[(0,o.wy)((0,o._)("p",w,null,512),[[W,t.price]])]),(0,o._)("button",{class:"cart__del",onClick:t=>c.Del(a)},"x",8,f)])),[[_.F8,c.hasBook]]))),128)),(0,o.wy)((0,o._)("tr",y,x,512),[[_.F8,c.hasBook]]),c.hasBook?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("tr",C,D))]),(0,o._)("table",B,[N,(0,o._)("tr",H,[I,(0,o._)("td",J,[(0,o.wy)((0,o._)("p",O,null,512),[[W,c.totalAmount]])])]),(0,o._)("tr",R,[(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>c.checking&&c.checking(...t))},"結帳")])])]),(0,o.Wm)(q,{handlebook:c.handlebook,booked:c.booked,bookStatus:c.bookStatus,bookResult:c.bookResult,handlebookStatus:c.handlebookStatus,noticlass:c.noticlass},null,8,["handlebook","booked","bookStatus","bookResult","handlebookStatus","noticlass"])],64)}var j=a(2602),z=a(4870);const M={components:{NotificationModal:j.Z},setup(){let t,e,a,c,s=(0,z.qj)([]),_=JSON.parse(localStorage.getItem("bookinfo")),l=(0,z.iH)(!1),r=(0,z.iH)(!1),n=(0,z.iH)(!1),i=(0,z.iH)(!1),u=(0,z.iH)();const d=()=>{l.value=!1},p=()=>{r.value=!r.value},k=(0,z.iH)(!1);_.length>=1?(s=_,k.value=!0,c=s.reduce(((t,e)=>t+e.price),0)):c=0;const b=t=>{s.some((e=>{if(e.goods==t.goods)return a=t.price/t.quantity,console.log(a),t.quantity++,t.price=t.quantity*a,!0})),g()},h=t=>{s.some((e=>{if(e.goods==t.goods)return a=t.price/t.quantity,t.quantity--,t.price=t.quantity*a,!0})),g()},m=t=>{console.log(t),s.splice(t,1),g()},g=()=>{localStorage.setItem("bookinfo",JSON.stringify(s)),s=JSON.parse(localStorage.getItem("bookinfo")),window.location.reload()},v=()=>{d.value=!0,l.value=!0,e=setTimeout((()=>{r.value=!0}),1e3),p.value=!0,t=JSON.parse(localStorage.getItem("isMember")),null==t&&(n.value="您還不是會員！請先至會員註冊",i.value=!1)},w=()=>{u.value=window.screen.availWidth};return(0,o.bv)((()=>{u.value=window.addEventListener("resize",w),w()})),{bookinfo:s,Incre:b,Decre:h,confirmBook:g,Del:m,hasBook:k,checking:v,handlebook:d,booked:l,bookStatus:r,bookResult:i,handlebookStatus:p,noticlass:n,totalAmount:c,screenWidth:u}}},U=()=>{(0,_.sj)((t=>({d76e8a0c:t.screenWidth})))},Z=M.setup;M.setup=Z?(t,e)=>(U(),Z(t,e)):U;var A=M,F=a(89);const K=(0,F.Z)(A,[["render",W],["__scopeId","data-v-2704a99b"]]);var V=K,Y={components:{Cart:V},setup(){return{}}};const E=(0,F.Z)(Y,[["render",c]]);var L=E}}]);
//# sourceMappingURL=428.ca336e6e.js.map