"use strict";(self["webpackChunk_321"]=self["webpackChunk_321"]||[]).push([[377],{3377:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var o=a(3396);function c(t,e,a,c,s,_){const l=(0,o.up)("Cart",!0);return(0,o.wg)(),(0,o.j4)(l)}var s=a(7139),_=a(9242);const l=t=>((0,o.dD)("data-v-9907075a"),t=t(),(0,o.Cn)(),t),r={class:"container cart__container"},n={class:"cart__list"},i=l((()=>(0,o._)("tr",{class:"cart__list__item"},[(0,o._)("th",{class:"cart__text cart__head"},"品項"),(0,o._)("th",{class:"cart__text cart__head"},"數量"),(0,o._)("th",{class:"cart__text cart__head cart__price"},"單價"),(0,o._)("th",{class:"cart__text cart__head cart__price"},"總價"),(0,o._)("th",{class:"cart__head cart__price cart__del"})],-1))),u={class:"cart__text"},d=["src","alt"],p={class:"cart__text bookNumber__control"},k=["onClick"],b=["onUpdate:modelValue"],h=["onClick"],m={class:"cart__text"},g={class:"cart__price"},v={class:"cart__text"},f={class:"cart__price"},w=["onClick"],y=l((()=>(0,o._)("tr",{class:"cart__list__item"},[(0,o._)("td",{class:"input-group"},[(0,o._)("input",{type:"text",id:"login_email",required:"",class:"input-group__input"}),(0,o._)("label",{for:"login_email",class:"input-group__label"},"輸入折價券代號")])],-1))),S={key:0,class:"cart__list__item"},x=l((()=>(0,o._)("td",null,"購物車目前還是空的唷！",-1))),C=[x],q={class:"check__table"},D=l((()=>(0,o._)("tr",{class:"cart__check spaceBetween"},[(0,o._)("td",{class:"cart__text"},[(0,o._)("p",{class:"cart__price sum__price cart__head"},"折扣：")]),(0,o._)("td",{class:"cart__text"},[(0,o._)("p",{class:"cart__price sum__price"},"0")])],-1))),N={class:"cart__check spaceBetween"},B=l((()=>(0,o._)("td",{class:"cart__text"},[(0,o._)("p",{class:"cart__price sum__price cart__head"},"總共：")],-1))),H={class:"cart__text"},I={class:"cart__price sum__price doubleUnderline"},J={class:"cart__check"};function O(t,e,a,c,l,x){const O=(0,o.up)("NotificationModal"),R=(0,o.Q2)("price");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("section",r,[(0,o._)("table",n,[i,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.bookinfo,((t,a)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{key:t.goods,class:"cart__list__item"},[(0,o._)("td",u,[(0,o._)("img",{class:"img",src:t.img,alt:t.nameeng},null,8,d),(0,o._)("article",null,[(0,o._)("h3",null,(0,s.zw)(t.name),1),(0,o._)("p",null,(0,s.zw)(t.desc),1)])]),(0,o._)("td",p,[(0,o._)("button",{class:"bookNumber__button border border__first",onClick:e=>c.Incre(t)}," + ",8,k),(0,o.wy)((0,o._)("input",{class:"border",type:"text","onUpdate:modelValue":e=>t.quantity=e,onKeyup:e[0]||(e[0]=(0,_.D2)(((...t)=>c.confirmBook&&c.confirmBook(...t)),["enter"]))},null,40,b),[[_.nr,t.quantity]]),(0,o._)("button",{class:(0,s.C_)(["bookNumber__button","border"]),onClick:e=>c.Decre(t)}," - ",8,h)]),(0,o._)("td",m,[(0,o.wy)((0,o._)("p",g,null,512),[[R,t.price/t.quantity]])]),(0,o._)("td",v,[(0,o.wy)((0,o._)("p",f,null,512),[[R,t.price]])]),(0,o._)("button",{class:"cart__del",onClick:t=>c.Del(a)},"x",8,w)])),[[_.F8,c.hasBook]]))),128)),y,c.hasBook?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("tr",S,C))]),(0,o._)("table",q,[D,(0,o._)("tr",N,[B,(0,o._)("td",H,[(0,o.wy)((0,o._)("p",I,null,512),[[R,c.totalAmount]])])]),(0,o._)("tr",J,[(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>c.checking&&c.checking(...t))},"結帳")])])]),(0,o.Wm)(O,{handlebook:c.handlebook,booked:c.booked,bookStatus:c.bookStatus,bookResult:c.bookResult,handlebookStatus:c.handlebookStatus,noticlass:c.noticlass},null,8,["handlebook","booked","bookStatus","bookResult","handlebookStatus","noticlass"])],64)}var R=a(2602),W=a(4870);const j={components:{NotificationModal:R.Z},setup(){let t,e,a,c,s=(0,W.qj)([]),_=JSON.parse(localStorage.getItem("bookinfo")),l=(0,W.iH)(!1),r=(0,W.iH)(!1),n=(0,W.iH)(!1),i=(0,W.iH)(!1),u=(0,W.iH)();const d=()=>{l.value=!1},p=()=>{r.value=!r.value},k=(0,W.iH)(!1);_.length>=1?(s=_,k.value=!0,c=s.reduce(((t,e)=>t+e.price),0)):c=0;const b=t=>{s.some((e=>{if(e.goods==t.goods)return a=t.price/t.quantity,console.log(a),t.quantity++,t.price=t.quantity*a,!0})),g()},h=t=>{s.some((e=>{if(e.goods==t.goods)return a=t.price/t.quantity,t.quantity--,t.price=t.quantity*a,!0})),g()},m=t=>{console.log(t),s.splice(t,1),g()},g=()=>{localStorage.setItem("bookinfo",JSON.stringify(s)),s=JSON.parse(localStorage.getItem("bookinfo")),window.location.reload()},v=()=>{d.value=!0,l.value=!0,e=setTimeout((()=>{r.value=!0}),1e3),p.value=!0,t=JSON.parse(localStorage.getItem("isMember")),null==t&&(n.value="您還不是會員！請先至會員註冊",i.value=!1)},f=()=>{u.value=window.screen.availWidth};return(0,o.bv)((()=>{u.value=window.addEventListener("resize",f),f()})),{bookinfo:s,Incre:b,Decre:h,confirmBook:g,Del:m,hasBook:k,checking:v,handlebook:d,booked:l,bookStatus:r,bookResult:i,handlebookStatus:p,noticlass:n,totalAmount:c,screenWidth:u}}},z=()=>{(0,_.sj)((t=>({ad5bc7ec:t.screenWidth})))},M=j.setup;j.setup=M?(t,e)=>(z(),M(t,e)):z;var U=j,Z=a(89);const A=(0,Z.Z)(U,[["render",O],["__scopeId","data-v-9907075a"]]);var K=A,V={components:{Cart:K},setup(){return{}}};const Y=(0,Z.Z)(V,[["render",c]]);var E=Y}}]);
//# sourceMappingURL=377.6af4d0b5.js.map